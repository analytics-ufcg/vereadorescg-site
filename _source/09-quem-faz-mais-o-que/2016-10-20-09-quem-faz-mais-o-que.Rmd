---
layout: post
title:  "Quem faz mais o que?"
subtitle: Badges para vereadores
published: false
categories: [análise]
tags: [atividade, propostas]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
library(ggplot2)
library(knitr)

current_dir = getwd()
setwd(Sys.getenv("VEREADOR_DIR"))
source("server.R")
source("vereadores_logic.R")
setwd(current_dir)

ementas = get_ementas_all(start_camara_db())
```

Dentre as propostas aprovadas, podemos notar que temas se repetem. Vamos aqui nomear os principais vereadores responsáveis por alguns tipos de propostas aprovadas, nomes que se destacam quando as contabilizamos.

Para propostas relacionadas a **operação taba-buraco**, a qual consiste em reparar buracos no pavimentos da cidade, o vereador com maior contagem foi **Miguel Rodrigues da Silva**.

```{r, echo=FALSE}
tapa.buraco = subset(ementas, grepl("BURACO", ementas$title) & grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(tapa.buraco, aes(tapa.buraco$proponents, fill=..count..)) + geom_bar() + labs(title = "Propostas aprovadas - Operação tapa-buraco", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,60))
```

Sobre pedidos para circulação do **fumacê**, veículo com propósito de combate principalmente ao mosquito Aedes Aegypti, os números são poucos e o vereador **Alexandre Pereira da Silva** está no topo da lista.

```{r, echo=FALSE}
antiZika = subset(ementas, grepl("FUMACÊ", ementas$title) & grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(antiZika, aes(antiZika$proponents, fill=..count..)) + geom_bar() + labs(title="Propostas aprovadas - Fumacê", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,8))
```

No **calçamento** de ruas com paralelepípedos e continuação de obras inacabadas com o mesmo propósito, **Alexandre Pereira da Silva** foi apresentou mais propostas aprovadas.

```{r, echo=FALSE}
calcador = subset(ementas, (grepl("CALÇAMENTO", ementas$title) | grepl("PARALELEPÍPEDO", ementas$title)) & !grepl("BURACO", ementas$title) & grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(calcador, aes(calcador$proponents, fill=..count..)) + geom_bar() + labs(title = "Propostas aprovadas - Calçamento", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,120))
```

Já para **pavimentação** de ruas o vereador em destaque é **Miguel Rodrigues da Silva** levando o título de *pavimentador* da cidade. 

```{r, echo=FALSE}
pavimentador = subset(ementas, grepl("PAVIMENTAÇÃO", ementas$title) & !grepl("CALÇAMENTO", ementas$title) & !grepl("BURACO", ementas$title) & !grepl("PARALELEPÍPEDO", ementas$title) & grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(pavimentador, aes(pavimentador$proponents, fill=..count..)) + geom_bar() + labs(title="Propostas aprovadas - Pavimentação", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,200))
```

Alguns vereadores se preocupam muito em **nomear** a ruas e lugares recém construídos, quem se destaca como um grande *nomeador* é o vereador **Antônio Alves Pimentel Filho**.

```{r, echo=FALSE}
nomeador = subset(ementas, (grepl("DENOMINA", ementas$title) | grepl("NOMEIA", ementas$title) | grepl("DÁ NOME", ementas$title) | grepl("DÁ O NOME", ementas$title)) & grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(nomeador, aes(nomeador$proponents, fill=..count..)) + geom_bar() + labs(title = "Propostas aprovadas - Nomeação", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,125))
```

Reconhecimeto é o que não falta por parte dos vereadores em Campina Grande, muitos vereadores se interessam em propor **votos de aplauso**, mas **Alexandre Pereira Da Silva** é com certeza o que teve mais aplausos aprovados.

```{r, echo=FALSE}
aplauso = subset(ementas, grepl("APLAUSO", ementas$title) & grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(aplauso, aes(aplauso$proponents, fill=..count..)) + geom_bar() + labs(title = "Propostas aprovadas - Votos de aplauso", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,150))
```

Além de aplausos, reconhecimento também pode ser demonstrado por **medalhas de honra** e o nome de maior *premiador*, apesar da pouca diferença, também vai para **Alexandre Pereira Da Silva**.

```{r, echo=FALSE}
premiador = subset(ementas, grepl("DE HONRA", ementas$title) & grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(premiador, aes(premiador$proponents, fill=..count..)) + geom_bar() + labs(title = "Propostas aprovadas - Medalhas de honra", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,8))
```

O número de propostas aprovadas e relacionadas a **iluminação pública** também foi contabilizada e, apesar de poucas, percebemos que além de aplaudir e premidar, o vereador **Alexandre Pereira da Silva** também foi nosso maior *iluminador*.

```{r, echo=FALSE}
iluminador = subset(ementas, (grepl("ILUMINAÇÃO", ementas$title) | grepl("DE LUZ", ementas$title)) & !grepl("CONGRATULA", ementas$title) & !grepl("APROVADO", ementas$ementa_id) & !grepl(",", ementas$proponents))

ggplot(iluminador, aes(iluminador$proponents, fill=..count..)) + geom_bar() + labs(title = "Propostas aprovadas - Iluminação pública", x = "", y = "") + coord_flip() + scale_fill_continuous(low="black", high="darkred", limits=c(0,10))
```


```{r, echo=FALSE}
ementas.v2 = subset(ementas, !(ementas$ementa_id %in% tapa.buraco$ementa_id) & 
                      !(ementas$ementa_id %in% aplauso$ementa_id) &
                      !(ementas$ementa_id %in% antiZika$ementa_id) &
                      !(ementas$ementa_id %in% calcador$ementa_id) &
                      !(ementas$ementa_id %in% pavimentador$ementa_id) &
                      !(ementas$ementa_id %in% nomeador$ementa_id) &
                      !(ementas$ementa_id %in% premiador$ementa_id) &
                      !(ementas$ementa_id %in% iluminador$ementa_id) &
                      grepl("APROVADO", ementas$ementa_id) &
                      !grepl(",", ementas$proponents))
```

