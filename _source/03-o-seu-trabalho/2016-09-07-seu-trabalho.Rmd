---
layout: post
title:  "Qual seu trabalho?"
published: true
date: 2016-09-05
categories: [análise]
tags: [temas]
---

```{r include=FALSE}
# Incluir em todos os posts
knitr::opts_chunk$set(screenshot.force = FALSE)
```


```{r setup, include=FALSE}
VEREADORES_DIR="/Users/nazareno/workspace/vereadorescg/R"

knitr::opts_chunk$set(echo = FALSE) 
library(ggplot2)
library(RPostgreSQL)
library(plotly, warn.conflicts = F)
library(lubridate, warn.conflicts = F)
library(dplyr, warn.conflicts = F)
library(readr)
library(knitr)
library(highcharter)
library(stringi)

anterior = getwd()
setwd(VEREADORES_DIR)
source("vereadores_logic.R")
source("data_access.R")
source("server.R")
setwd(anterior) 
source("site-lib.R")
theme_set(theme_minimal())

camara_db <- start_camara_db()
vereadores = get_vereadores_para_ui(camara_db)
ementas = get_ementas_all(camara_db, not_older_than = 2013)

epv = data.frame()
for(v in vereadores$sequencial_candidato){
  desse_vereador = get_ementas_por_vereador(camara_db, v, 2012)
  epv = rbind(epv, desse_vereador)
}
```

Boa parte da atuação de nossos vereadores se concentra em apresentar propostas de leis ou ações para a câmara e para o poder executivo. Grosso modo, podemos observar a atuação deles dividindo-a entre legislativa -- a criação e alteração de leis -- e administrativa. Propostas de ações administrativas incluem requerer medidas de órgãos da prefeitura -- por exemplo, à Secretaria de Esporte e Juventude que crie uma academia em um bairro -- ou ações da própria câmara, tais como votos de aplauso ou pesar. Na prática, embora as propostas administrativas sejam necessárias, são bem menos relevantes e têm menos efeito a longo prazo no município.

Dede o início da atual legislatura, nossa câmara analisou mais de 10.000 proposições. A enorme maioria são atos administrativos: 

```{r}
e = ementas %>% 
  #filter(proponents != "Romero Rodrigues Veiga") %>% # Sem Romero?
  count(tipo_ato) %>% 
  rename("tipo" = tipo_ato, "quantos" = n)
e$quando = "2013-2016"
p = e %>% 
  ggplot() + 
  geom_point(aes(y = tipo, x = quando, size = quantos), colour = "darkblue", alpha = .8) + 
  scale_radius(range = c(5, 40)) + 
  labs(x = "", y = "")
ggplotly(p)

```

```{r}
epv %>%
  count(nome_urna_candidato) %>% 
  arrange(-n)

epv %>%
  filter(tipo_ato == "Legislativo") %>% 
  count(nome_urna_candidato) %>% 
  arrange(-n)

x = epv %>%
  filter(tipo_ato == "Legislativo") %>% mutate(en = grepl("DENOMINA", title) )
``` 


Na prática, exemplos de leis municipais abrangem desde a criação de conselhos, passando pela denominação de ruas, até diretrizes para políticas municipais, como na criação do Plano de Mobilidade de Campina Grande. 


Seria muito bom também olhar os votos. 
