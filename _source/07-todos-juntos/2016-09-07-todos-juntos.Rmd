---
layout: post
title:  "Todos Juntos"
published: true
categories: [análise]
tags: [eficiência, férias]
---

```{r setup, include=FALSE} 
knitr::opts_chunk$set(screenshot.force = FALSE, echo = FALSE) 

library(ggplot2, warn.conflicts = F, quietly = T)
library(highcharter, warn.conflicts = F, quietly = T)
library(dplyr, warn.conflicts = F, quietly = T)

current_dir = getwd()
VEREADOR_DIR = Sys.getenv("VEREADOR_DIR")
setwd(VEREADOR_DIR)
source("server.R")
source("vereadores_logic.R")
setwd(current_dir)

theme_set(theme_minimal(16))

meses = c("Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez")
mes_name = data_frame(mes_numero = 1:12, 
                      Mes = factor(meses, meses, ordered = T))

all_ementas_month_year = get_ementas_all(start_camara_db()) %>%
    select(year, published_month, situation) %>%
    mutate(mes_numero = as.numeric(month(published_month))) %>% 
    inner_join(mes_name, by = "mes_numero") %>%
    rename(Ano = year) %>%
    filter(situation == 'APROVADO') %>% 
    select(-situation, -mes_numero, -published_month)

```

Analisando a eficiência global da Câmara nessa legislatura em termos da quantidade de ementas aprovadas por ano percebemos um fato interessante, a quantidade de ementas diminuiu consistentemente com o passar dos anos. O fôlego dos vereadores cai de tal forma que se continuar como está podemos prever que o 4º ano terminará com pouco mais que 50% do número de ementas do 1º ano![^footnote-dia-coleta]

```{r ementas_por_ano}

ano_count = all_ementas_month_year %>% 
    count(Ano) %>% 
    ungroup()

highchart() %>% 
  hc_chart(type = "column") %>% 
  hc_title(text = "Nº de Ementas por Ano") %>% 
  hc_xAxis(categories = ano_count$Ano) %>% 
  hc_yAxis(plotLines = list(
    list(
          value = as.integer(ano_count$n[1]/2),
          color = 'green',
          width = 2,
          zIndex = 4,
          dashStyle = 'dash',
          label = list(text = "50% do 1º ano de Mandato", 
                       style = list(fontWeight = "bold", color = 'green')
          )))) %>% 
  hc_add_series(name = "Ementas", showInLegend = F, 
                data = ano_count$n) %>% 
  hc_add_series(name = "Ementas", type = "line", showInLegend = F, 
                data = ano_count$n)

```

Uma das possíveis explicações para esse fato é a recandidatura de grande parte dos vereadores em 2016, que acarreta em vários compromissos inevitáveis extra Câmara. Mas, além disso, existe um fato que impacta consistentemente nossa Câmara anualmente, os meses de férias.

### Férias?
Por lei, todo vereador pode ter até 3 meses de férias por ano. Fazendo as contas, se em todo ano são 3 meses, em 4 anos eles tem 12 meses de férias, ou seja, em um mandato de 4 anos eles só precisam trabalhar 3! Mas (para amenizar) a Câmara de Campina Grande definiu em seu regimento **71 dias** de férias por ano dividido em dois períodos: do dia *23 de Dezembro* à *10 de Fevereiro* e do dia *20 de Junho* à *10 de Julho*.

Analisando o impacto das férias no número de proposições dos vereadores por mês[^footnote-dia-coleta], vemos quedas na eficiência parlamentar tanto nos meses das férias em si como também uma tendência nos meses anteriores a elas (Maio e Novembro). Ou seja, supondo uma redução no tempo de férias, ou ao menos a existência de um período único, poderíamos esperar um aumento na quantidade e, certamente, da qualidade do trabalho dos vereadores que seria percebida pela maior responsividade para com os problemas da nossa cidade. 

```{r ementas_por_mes_do_ano}
ano_mes_count = all_ementas_month_year %>% count(Ano, Mes) %>% ungroup()

hc_plot = hchart(ano_mes_count, "column", x = Ano, y = n, group = Mes) %>% 
  hc_yAxis(title = "") %>% 
  hc_xAxis(title = "") %>% 
  hc_title(text = "Nº de Ementas por Mês")
hc_plot
```

[^footnote-dia-coleta]: Os dados que embasaram essa análise foram coletados no dia *12 de Agosto de 2016*, além disso as ementas demoram alguns dias para serem adicionadas no sistema da Câmara, então podemos esperar um aumento nas ementas para os meses reportados.
